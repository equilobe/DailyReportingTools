@if(Model.Errors!=null && Model.Errors.Count>0)
{
    <div style="margin-top:20px">
        <table style="border:1px solid #D00000; min-width:250px; border-radius:10px; padding:5px; background-color:#FAEAEA">
            <tbody>
                <tr>
                    <th>
                        <div>
                            <a style="text-decoration:none;border-radius:50px;width:16px; height:15px; font-size:11px; font-family: Segoe UI Symbol, Arial;color:#ffffff;padding:1px 1px 1px 1px;background-color:#D00000; display:inline-block; margin-right:4px;">
                                &#10006;
                            </a>
                            <b style="color:#D00000; font-size:14px;">Report Errors</b>
                            <table style="margin-top:5px">
                                <tbody>
                                    @if (Model.CompletedWithEstimateErrors.Count > 0)
                                    {
                                        <tr>
                                            <td style="vertical-align:top; width:15px">
                                                <span>&#x25cf;</span>
                                            </td>
                                            <td colspan="1" style="text-align: left"><b style="font-size:14px; color:black">@Model.CompletedWithEstimateErrors.Count completed items with remaining estimate</b></td>
                                        </tr>                                     
                                    }
                                    @if (Model.CompletedWithNoWorkErrors.Count > 0)
                                    {
                                        <tr>
                                            <td style="vertical-align:top; width:15px">
                                                <span>&#x25cf;</span>
                                            </td>
                                            <td colspan="1" style="text-align: left"><b style="font-size:14px; color:black">@Model.CompletedWithNoWorkErrors.Count completed items with no work logged</b></td>
                                        </tr>                                    
                                    }
                                    @if (Model.UnassignedErrors.Count > 0)
                                    {
                                        <tr>
                                            <td style="vertical-align:top; width:15px">
                                                <span>&#x25cf;</span>
                                            </td>
                                            <td colspan="1" style="text-align: left"><b style="font-size:14px; color:black">@Model.UnassignedErrors.Count unassigned items with no estimate</b></td>
                                        </tr>                                      
                                    }
                                    @if (Model.AuthorsWithErrors != null && Model.AuthorsWithErrors.Count > 0)
                                    {
                                        foreach (var author in Model.AuthorsWithErrors)
                                        {
                                            <tr>
                                                <td style="vertical-align:top; width:15px">
                                                    <span>&#x25cf;</span>
                                                </td>
                                                <td colspan="1" style="text-align: left"><b style="font-size:14px; color:black">@author.FirstName has @author.Errors.Count items with no estimate</b></td>
                                            </tr>                                          
                                        }
                                    }
                                </tbody>
                            </table>
                        </div>
                    </th>               
                </tr>
            </tbody>
        </table>
    </div>
}
<div style="margin-top:10px">
    <table style="border:1px solid #DDD; border-collapse:collapse; min-width:250px">
        <tbody>
            @if(Model.HasSprint)
            {
                if (Model.AllocatedHoursPerDay > 0)
                {
                    <tr>
                        <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                            <b style="color:black; font-size:14px;">Sprint status</b>
                        </th>
                        <td colspan="1" style="vertical-align: top; text-align: center; padding:5px; border:1px solid #DDD; background-color:@Model.HealthColors[Model.SprintHealth]">
                            <span style="color:black; font-size:14px">@Model.SprintStatus</span>
                        </td>
                    </tr>
                }
                <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px;">Sprint - remaining work / day</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD;">
                        <span style="color:black; font-size:14px;">@Model.SprintHourRateString</span>
                    </td>
                </tr>
            }
            @if(Model.AllocatedHoursPerDay > 0)
            {
                <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px">Team - estimated work rate / day</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD;">
                        <span style="color:black; font-size:14px">@Model.AllocatedHoursPerDayString</span>
                    </td>
                </tr>
            }
            @if (Model.AllocatedHoursPerMonth > 0)
            {
                <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px">Month status</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: center; padding:5px; border:1px solid #DDD; background-color:@Model.HealthColors[Model.MonthHealth]">
                        <span style="color:black; font-size:14px">@Model.MonthStatus</span>
                    </td>
                </tr>
                <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px">Month - remaining work / day</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        <span style="color:black; font-size:14px">@Model.MonthHourRateString</span>
                    </td>
                </tr>
                <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px">Month - remaining time</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        <span style="color:black; font-size:14px">@Model.MonthTimeLeft</span>
                    </td>
                </tr>
                 <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px">Month - work limit</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        <span style="color:black; font-size:14px">@Model.AllocatedHoursPerMonthDetailed (@Model.AllocatedHoursPerMonthTime)</span>
                    </td>
                </tr>
            }
            @if (Model.CommitsCount > 0)
            {
                <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px">Commits</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        <span style="color:black; font-size:14px"> @Model.CommitsCount</span>
                    </td>
                </tr>
            }
            <tr>
                <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                    <b style="color:black; font-size:14px">People</b>
                </th>
                <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                    <span style="color:black; font-size:14px"> @Model.AuthorsInvolved</span>
                </td>
            </tr>
            @if (Model.PullRequests.Count > 0)
            {
                <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px">Pull requests</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        <span style="color:black; font-size:14px"> @Model.PullRequests.Count</span>
                    </td>
                </tr>
            }
            @if (Model.UnrelatedPullRequests.Count > 0)
            {
                <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px">Unrelated pull requests</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        @Partial("Views/UnrelatedPullRequests.cshtml", Model.UnrelatedPullRequests)
                    </td>
                </tr>
            }
            @*@if (Model.Errors.ErrorsCount > 0)
            {
                <tr>
                    <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <b style="color:black; font-size:14px">Report errors</b>
                    </th>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        @Partial("Views/errorsSection.cshtml", Model.Errors)
                    </td>
                </tr>
            }*@
        </tbody>
    </table>
</div>

<div style="margin-top:10px">
    <table style="border: 1px solid #DDD; border-collapse:collapse; min-width:400px">
        <tbody>
            <tr>
                <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                    <b style="color:black; font-size:14px">Work summary</b>
                </th>
                <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                    <b style="color:black; font-size:14px"> @Model.ReportDate</b>
                </th>
                <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                    <b style="color:black; font-size:14px">Sprint</b>
                </th>
                <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                    <b style="color:black; font-size:14px">Month</b>
                </th>
            </tr>
            <tr>
                <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                    <b style="color:black; font-size:14px"> TOTAL </b>
                </td>
                <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD; background-color:@Model.HealthColors[Model.WorkedDaysHealth]">
                    <b style="color:black; font-size:14px"> @Model.TotalTime </b>
                </td>
                <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD; background-color:@Model.HealthColors[Model.SprintHealth]">
                    <b style="color:black; font-size:14px">@Model.SprintHoursWorkedString</b>
                </td>
                <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD; background-color:@Model.HealthColors[Model.MonthHealth]">
                    <b style="color:black; font-size:14px"> @Model.MonthHoursWorkedString</b>
                </td>
            </tr>
            @foreach(var author in Model.Authors)
            {
                <tr>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        <span style="color:black; font-size:14px"> @author.ShortName </span>
                    </td>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        @if (author.TimeSpent > 0)
                        {
                            <span style="color:black; font-size:14px"> @author.TimeLogged </span>
                        }
                        else
                        {
                            <span style="color:black; font-size:14px"> - </span>
                        }
                    </td>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        @if (author.TimeSpentCurrentSprintSeconds > 0)
                        {
                            <span style="color:black; font-size:14px"> @author.TimeSpentCurrentSprintString</span>
                        }
                        else
                        {
                            <span style="color:black; font-size:14px"> - </span>
                        }
                    </td>
                    <td colspan="1" style="vertical-align: top; text-align: left; padding:5px; border:1px solid #DDD">
                        @if (author.TimeSpentCurrentMonthSeconds > 0)
                        {
                            <span style="color:black; font-size:14px"> @author.TimeSpentCurrentMonthHoursString</span>
                        }
                        else
                        {
                            <span style="color:black; font-size:14px"> - </span>
                        }
                    </td>
                </tr>                 
            }
        </tbody>
    </table>
</div>

<div style="margin-top:10px">
    <table style="border: 1px solid #DDD; border-collapse:collapse; min-width:400px">
        <tr>
            <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                <b style="color:black; font-size:14px;">Remaining summary</b>
            </th>
            <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                <b style="color:black; font-size:14px;">In Progress</b>
            </th>
            <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                <b style="color:black; font-size:14px;">Upcoming</b>
            </th>
            <th colspan="1" style="background-color:#F0F0F0; padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                <b style="color:black; font-size:14px;">Both</b>
            </th>
        </tr>
        <tr>
            <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                <b style="color:black; font-size:14px;">TOTAL</b>
            </td>
            <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                @if(Model.InProgressTasksTimeLeftSeconds > 0)
                {
                    <b style="color:black; font-size:14px;">@Model.InProgressTasksTimeLeft</b>
                }
                else
                {
                    <b style="color:black; font-size:14px;"> - </b>
                }
            </td>
            <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                @if(Model.OpenTasksTimeLeftSeconds > 0)
                {
                    <b style="color:black; font-size:14px;">@Model.OpenTasksTimeLeft</b>
                }
                else
                {
                    <b style="color:black; font-size:14px;"> - </b>
                }
            </td>
            <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                @if(Model.SprintTasksTimeLeftSeconds > 0)
                {
                    <b style="color:black; font-size:14px;">@Model.SprintTasksTimeLeftHoursString</b>
                }
                else
                {
                    <b style="color:black; font-size:14px;"> - </b>
                }
            </td>
        </tr>
        @if (Model.Authors != null && Model.Authors.Count > 0)
        {
            foreach (var author in Model.Authors)
            {
                <tr>
                    <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        <span style="color:black; font-size:14px;">@author.ShortName</span>
                    </td>
                    <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        @if (author.InProgressTasksTimeLeftSeconds > 0)
                        {
                            <span style="color:black; font-size:14px;">@author.InProgressTasksTimeLeft</span>
                        }
                        else
                        {
                            <span style="color:black; font-size:14px;"> - </span>
                        }
                    </td>
                    <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        @if (author.OpenTasksTimeLeftSeconds > 0)
                        {
                            <span style="color:black; font-size:14px;">@author.OpenTasksTimeLeft</span>
                        }
                        else
                        {
                            <span style="color:black; font-size:14px;"> - </span>
                        }
                    </td>
                    <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                        @if (author.RemainingEstimateSeconds > 0)
                        {
                            <span style="color:black; font-size:14px;">@author.RemainingEstimateHoursString</span>
                        }
                        else
                        {
                            <span style="color:black; font-size:14px;"> - </span>
                        }
                    </td>
                </tr>  
            }
        }
        <tr>
            <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                <span style="color:black; font-size:14px;">Unassigned</span>
            </td>
            <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                @if (Model.InProgressUnassignedTasksSecondsLeft > 0)
                {
                    <span style="color:black; font-size:14px;">@Model.InProgressUnassignedTasksTimeLeft</span>
                }
                else
                {
                    <span style="color:black; font-size:14px;"> - </span>
                }
            </td>
            <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                @if (Model.OpenUnassignedTasksSecondsLeft > 0)
                {
                    <span style="color:black; font-size:14px;">@Model.OpenUnassignedTasksTimeLeft</span>
                }
                else
                {
                    <span style="color:black; font-size:14px;"> - </span>
                }
            </td>
            <td colspan="1" style="padding:5px; vertical-align:top; text-align:left; border:1px solid #DDD">
                @if (Model.UnassignedTasksSecondsLeft > 0)
                {
                    <span style="color:black; font-size:14px;">@Model.UnassignedTasksTimeLeft</span>
                }
                else
                {
                    <span style="color:black; font-size:14px;"> - </span>
                }
            </td>

        </tr>
    </table>
</div>